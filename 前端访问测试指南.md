# 前端访问测试指南

## 📋 测试前准备

### 1. 服务状态检查

确保以下服务正在运行：

- ✅ **后端服务**: `http://localhost:5000`
  - 检查方式: 访问 `http://localhost:5000/swagger`
  - 如果未运行，执行: `快速启动后端.bat`

- ✅ **前端服务**: `http://localhost:5173`
  - 检查方式: 访问 `http://localhost:5173`
  - 如果未运行，执行: `快速启动前端.bat`

---

## 🧪 测试场景

### 场景 1: 访客模式（无需钱包）

**测试步骤：**

1. **打开浏览器**
   - 访问: `http://localhost:5173`
   - 或使用无痕模式（避免缓存影响）

2. **验证页面加载**
   - ✅ 页面应该正常加载，不显示错误
   - ✅ 应该看到 "Wallet Status" 卡片
   - ✅ 应该看到 "Hot Products" 区域
   - ✅ 应该看到 "Recent Orders" 区域

3. **验证商品浏览**
   - ✅ 商品列表应该正常显示（如果有商品）
   - ✅ 搜索框应该可以输入
   - ✅ 排序下拉菜单应该可以操作
   - ✅ 筛选按钮应该可以点击

4. **验证访客模式提示**
   - ✅ 钱包状态显示 "未连接"
   - ✅ 网络状态显示 "未连接"
   - ✅ 可以浏览商品，但无法添加到购物车（需要钱包）

---

### 场景 2: 连接钱包模式

**测试步骤：**

1. **安装钱包扩展**
   - 安装 Bitget Wallet 或 MetaMask
   - 确保钱包已创建账户

2. **连接钱包**
   - 点击 "CONNECT WALLET" 按钮
   - 选择要连接的钱包
   - 确认连接请求

3. **验证钱包连接**
   - ✅ 钱包地址应该显示
   - ✅ 网络名称应该显示
   - ✅ Chain ID 应该显示
   - ✅ RPC 延迟应该显示（如果可用）

4. **验证功能**
   - ✅ 可以浏览商品
   - ✅ 可以添加到购物车
   - ✅ 可以创建订单
   - ✅ 可以使用 Web3 支付

---

### 场景 3: 商品浏览功能

**测试步骤：**

1. **搜索商品**
   - 在搜索框输入关键词
   - 验证搜索结果是否正确
   - 验证搜索防抖是否生效（延迟输入）

2. **排序商品**
   - 选择不同的排序方式：
     - 最新上架
     - 价格从低到高
     - 价格从高到低
     - 名称 A-Z
     - 名称 Z-A
   - 验证排序结果是否正确

3. **筛选商品**
   - 点击 "筛选" 按钮
   - 设置价格范围
   - 选择链 ID
   - 验证筛选结果是否正确

---

### 场景 4: 购物车功能（需要钱包）

**测试步骤：**

1. **添加商品到购物车**
   - 点击商品的 "Buy Now" 按钮
   - 或点击购物车图标
   - 验证商品是否添加到购物车

2. **管理购物车**
   - 查看购物车内容
   - 修改商品数量（+/- 按钮）
   - 删除商品
   - 验证总价计算是否正确

3. **结算订单**
   - 点击 "结算" 按钮
   - 验证订单创建流程
   - 验证支付流程（Web3 支付）

---

### 场景 5: 订单管理（需要钱包）

**测试步骤：**

1. **查看订单列表**
   - 点击 "View All" 按钮（在 Recent Orders 区域）
   - 或访问: `http://localhost:5173/orders`
   - 验证订单列表是否正常显示

2. **订单筛选**
   - 按订单状态筛选
   - 按支付方式筛选
   - 按订单号搜索
   - 验证筛选结果是否正确

3. **订单详情**
   - 点击订单查看详情
   - 验证订单信息是否完整
   - 验证支付状态时间线

4. **取消订单**
   - 取消待支付订单
   - 验证库存是否恢复
   - 验证订单状态是否更新

---

## 🔍 常见问题排查

### 问题 1: 页面显示 "Internal Server Error"

**可能原因：**
- 后端服务未运行
- CORS 配置问题
- API 响应格式问题

**解决方法：**
1. 检查后端服务是否运行: `http://localhost:5000/swagger`
2. 检查浏览器控制台错误信息
3. 检查 Network 标签中的 API 请求状态
4. 强制刷新页面 (Ctrl+F5)

---

### 问题 2: 商品列表为空

**可能原因：**
- 数据库中没有商品数据
- API 请求失败
- 筛选条件过于严格

**解决方法：**
1. 检查后端 API: `http://localhost:5000/api/store/products`
2. 检查数据库是否有商品数据
3. 清除筛选条件重新加载

---

### 问题 3: 无法连接钱包

**可能原因：**
- 未安装钱包扩展
- 钱包扩展未启用
- 浏览器不支持

**解决方法：**
1. 安装 Bitget Wallet 或 MetaMask
2. 确保钱包扩展已启用
3. 刷新页面重试

---

### 问题 4: CORS 错误

**可能原因：**
- 后端 CORS 配置未包含前端地址
- 后端服务未重启

**解决方法：**
1. 检查 `Program.cs` 中的 CORS 配置
2. 确保包含 `http://localhost:5173`
3. 重启后端服务

---

## 📊 测试检查清单

### 基础功能
- [ ] 页面可以正常加载
- [ ] 不显示错误页面
- [ ] 商品列表可以正常显示
- [ ] 搜索功能正常
- [ ] 排序功能正常
- [ ] 筛选功能正常

### 钱包功能
- [ ] 可以检测到钱包
- [ ] 可以连接钱包
- [ ] 钱包地址正确显示
- [ ] 网络信息正确显示
- [ ] RPC 延迟可以检测

### 购物功能（需要钱包）
- [ ] 可以添加商品到购物车
- [ ] 可以修改购物车商品数量
- [ ] 可以删除购物车商品
- [ ] 可以创建订单
- [ ] 可以查看订单列表
- [ ] 可以查看订单详情
- [ ] 可以取消订单

### Web3 支付（需要钱包）
- [ ] 可以准备支付
- [ ] 可以签名交易
- [ ] 可以等待链上确认
- [ ] 支付状态可以实时更新
- [ ] 支付超时可以正确处理

---

## 🚀 快速测试命令

### 启动所有服务
```bash
# 启动后端
快速启动后端.bat

# 启动前端（新窗口）
快速启动前端.bat
```

### 检查服务状态
```bash
# 检查后端
curl http://localhost:5000/health

# 检查前端
curl http://localhost:5173
```

### 测试 API
```bash
# 测试商品列表 API
curl http://localhost:5000/api/store/products

# 测试商品分类 API
curl http://localhost:5000/api/store/categories
```

---

## 📝 测试报告模板

### 测试环境
- **日期**: ___________
- **浏览器**: ___________
- **钱包**: ___________
- **后端版本**: ___________
- **前端版本**: ___________

### 测试结果
- **基础功能**: ✅ / ❌
- **钱包功能**: ✅ / ❌
- **购物功能**: ✅ / ❌
- **支付功能**: ✅ / ❌

### 发现的问题
1. ___________
2. ___________
3. ___________

### 备注
___________

---

## 🎯 下一步

测试完成后，如果发现问题：
1. 记录问题详情（截图、日志）
2. 检查浏览器控制台错误
3. 检查 Network 标签中的请求状态
4. 检查后端服务日志
5. 根据错误信息进行修复

