# 浏览器控制台检查指南

## 如何打开浏览器控制台

### Chrome/Edge
- 按 `F12` 或 `Ctrl+Shift+I` (Windows) / `Cmd+Option+I` (Mac)
- 右键点击页面 → 选择"检查" → 切换到"Console"标签

### Firefox
- 按 `F12` 或 `Ctrl+Shift+K` (Windows) / `Cmd+Option+K` (Mac)

### Safari
- 按 `Cmd+Option+C` (Mac)
- 需要先在"偏好设置"中启用"开发"菜单

---

## 检查步骤

### 1. 打开控制台
访问 http://localhost:5173 后，打开浏览器开发者工具（F12）

### 2. 查看控制台标签
切换到"Console"标签页

### 3. 检查错误类型

#### ✅ 正常日志（应该看到）
```
API Base URL from .env: http://localhost:5195
```

#### ❌ 常见错误

##### 错误1: API连接失败
```
net::ERR_CONNECTION_REFUSED
或
Failed to fetch
```
**原因**: 后端服务未启动或地址不正确
**解决**: 
- 确保后端服务运行在 http://localhost:5195
- 检查 `.env` 文件中的 `VITE_API_BASE_URL` 配置

##### 错误2: 环境变量未加载
```
VITE_API_BASE_URL is undefined
```
**原因**: 环境变量未正确加载
**解决**: 
- 重启开发服务器
- 检查 `.env` 文件是否存在
- 确认环境变量以 `VITE_` 开头

##### 错误3: 模块导入错误
```
Failed to resolve import "tronweb"
或
Cannot find module 'tronweb'
```
**原因**: TronWeb未正确安装
**解决**: 
```bash
cd src/Frontend/web-app
npm install tronweb
```

##### 错误4: 钱包未检测到
```
Unable to obtain wallet information
```
**原因**: 浏览器未安装MetaMask等钱包扩展
**解决**: 
- 这是正常情况，应用会跳转到"未检测到钱包"页面
- 安装MetaMask扩展后刷新页面

##### 错误5: CORS错误
```
Access to XMLHttpRequest has been blocked by CORS policy
```
**原因**: 后端未配置CORS
**解决**: 
- 检查后端 `Program.cs` 中的CORS配置
- 确保 `AllowAnyOrigin()` 已启用（开发环境）

##### 错误6: 404错误
```
GET http://localhost:5195/api/xxx 404 (Not Found)
```
**原因**: API端点不存在
**解决**: 
- 检查后端API路由配置
- 确认API路径正确

---

## 检查清单

### ✅ 基础检查
- [ ] 控制台无红色错误信息
- [ ] 看到 "API Base URL from .env" 日志
- [ ] 页面正常加载，无白屏

### ✅ API连接检查
- [ ] 无 `ERR_CONNECTION_REFUSED` 错误
- [ ] 无 CORS 错误
- [ ] API请求返回正常响应

### ✅ 依赖检查
- [ ] 无模块导入错误
- [ ] 无 `Cannot find module` 错误
- [ ] 所有依赖包已正确安装

### ✅ 功能检查
- [ ] 钱包检测功能正常（如果有MetaMask）
- [ ] 路由跳转正常
- [ ] 页面渲染无错误

---

## 常见问题排查

### 问题1: 页面白屏
**检查**:
1. 控制台是否有JavaScript错误
2. 网络标签是否有请求失败
3. 检查 `main.ts` 是否正确执行

### 问题2: API请求失败
**检查**:
1. 后端服务是否运行: http://localhost:5195
2. `.env` 文件配置是否正确
3. 后端CORS配置是否正确

### 问题3: 环境变量未生效
**检查**:
1. `.env` 文件是否在项目根目录
2. 环境变量是否以 `VITE_` 开头
3. 是否重启了开发服务器

---

## 调试技巧

### 1. 清除缓存
- 按 `Ctrl+Shift+R` (Windows) / `Cmd+Shift+R` (Mac) 强制刷新
- 或在控制台输入: `location.reload(true)`

### 2. 查看网络请求
- 切换到"Network"标签
- 查看API请求的状态码和响应

### 3. 查看源代码
- 切换到"Sources"标签
- 可以设置断点进行调试

### 4. 查看应用状态
- 在控制台输入: `localStorage` 查看存储的数据
- 输入: `window` 查看全局对象

---

## 预期正常日志

### 启动时应该看到:
```
API Base URL from .env: http://localhost:5195
```

### 如果有MetaMask:
```
{chainId: '0x...'}
```

### 如果无错误:
控制台应该干净，只有必要的日志信息

---

## 需要帮助？

如果发现错误，请记录：
1. 错误信息（完整文本）
2. 错误堆栈（点击错误查看详情）
3. 网络请求状态（Network标签）
4. 浏览器版本和类型

