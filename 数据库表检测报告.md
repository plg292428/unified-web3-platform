# 数据库表检测报告

**检测时间**: 2025-11-12  
**数据库**: UnifiedWeb3Platform

---

## 一、检测结果

### ✅ 核心购物表

| 表名 | 状态 | 说明 |
|------|------|------|
| Product | ⏸️ 待检测 | 商品表 |
| ProductCategory | ⏸️ 待检测 | 商品分类表 |
| Orders | ⏸️ 待检测 | 订单表 |
| OrderItems | ⏸️ 待检测 | 订单商品表 |
| ShoppingCartItem | ⏸️ 待检测 | 购物车表 |
| ProductInventory | ⏸️ 待检测 | 商品库存表 |

### ✅ 商品管理增强表

| 表名 | 状态 | 说明 |
|------|------|------|
| ProductImages | ⏸️ 待检测 | 商品图片表 |
| ProductReviews | ⏸️ 待检测 | 商品评价表 |
| ProductSpecifications | ⏸️ 待检测 | 商品规格表 |

---

## 二、检测方法

### 方法 1: 使用 SQL 查询

```sql
-- 检查表是否存在
SELECT TABLE_NAME 
FROM INFORMATION_SCHEMA.TABLES 
WHERE TABLE_NAME IN (
    'ProductImages', 
    'ProductReviews', 
    'ProductSpecifications',
    'Product',
    'Orders'
)
ORDER BY TABLE_NAME;
```

### 方法 2: 检查迁移记录

```sql
-- 检查迁移历史
SELECT MigrationId, ProductVersion 
FROM __EFMigrationsHistory 
WHERE MigrationId LIKE '%ProductReview%' 
   OR MigrationId LIKE '%ProductImage%'
   OR MigrationId LIKE '%ProductSpecification%'
ORDER BY MigrationId;
```

### 方法 3: 检查表结构

```sql
-- 检查表列数
SELECT COUNT(*) AS ColumnCount 
FROM INFORMATION_SCHEMA.COLUMNS 
WHERE TABLE_NAME = 'ProductImages';

SELECT COUNT(*) AS ColumnCount 
FROM INFORMATION_SCHEMA.COLUMNS 
WHERE TABLE_NAME = 'ProductReviews';

SELECT COUNT(*) AS ColumnCount 
FROM INFORMATION_SCHEMA.COLUMNS 
WHERE TABLE_NAME = 'ProductSpecifications';
```

---

## 三、如果表未创建

### 解决方案

执行 SQL 脚本创建表：

**文件**: `创建新表脚本_简化版.sql`

**执行方式**:

1. **使用 SSMS**:
   - 打开 SQL Server Management Studio
   - 连接到数据库
   - 打开并执行脚本

2. **使用命令行**:
   ```cmd
   sqlcmd -S localhost -d UnifiedWeb3Platform -U UnifiedWebAppUser -P "P@ssword_2025!" -i "创建新表脚本_简化版.sql"
   ```

---

## 四、预期结果

### 表结构

#### ProductImages 表
- ImageId (bigint, PK)
- ProductId (bigint, FK)
- ImageUrl (nvarchar(512))
- ImageType (nvarchar(32))
- SortOrder (int)
- IsPrimary (bit)
- CreateTime (datetime)

#### ProductReviews 表
- ReviewId (bigint, PK)
- ProductId (bigint, FK)
- Uid (int, FK)
- OrderId (bigint, FK, nullable)
- Rating (int)
- Content (nvarchar(2000))
- IsApproved (bit)
- IsVisible (bit)
- CreateTime (datetime)
- UpdateTime (datetime)

#### ProductSpecifications 表
- SpecificationId (bigint, PK)
- ProductId (bigint, FK)
- SpecificationName (nvarchar(64))
- SpecificationValue (nvarchar(128))
- PriceAdjustment (decimal(19,6))
- StockQuantity (int, nullable)
- SortOrder (int)
- IsEnabled (bit)
- CreateTime (datetime)
- UpdateTime (datetime)

---

## 五、检测脚本

运行检测脚本：
```cmd
.\检测数据库表.bat
```

或使用 PowerShell：
```powershell
.\检测数据库表.ps1
```

---

**报告生成时间**: 2025-11-12

