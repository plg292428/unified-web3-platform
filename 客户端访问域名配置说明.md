# 客户端访问域名配置说明

## 🌐 访问地址

### 当前配置的访问地址

**HTTPS 访问（推荐）**:
- `https://www.a292428dsj.dpdns.org:8443`
- `https://a292428dsj.dpdns.org:8443`

**本地访问（备用）**:
- `https://localhost:8443`
- `http://localhost:5173` (HTTP，如果还在运行)

---

## 📋 配置检查清单

### 1. Hosts 文件配置（本地开发需要）

**文件路径**: `C:\Windows\System32\drivers\etc\hosts`

**需要添加的内容**:
```
127.0.0.1    www.a292428dsj.dpdns.org
127.0.0.1    a292428dsj.dpdns.org
```

**配置方法**:
1. 右键以管理员身份运行: `配置域名访问.bat`
2. 或手动编辑 hosts 文件（需要管理员权限）

**验证方法**:
```bash
ping www.a292428dsj.dpdns.org
# 应该返回 127.0.0.1
```

---

### 2. 前端服务状态

**检查方法**:
```bash
netstat -ano | findstr ":8443"
```

**如果未运行**:
- 运行: `启动HTTPS前端.bat`
- 或手动运行: `cd src/Frontend/web-app && npm run dev`

---

### 3. 后端服务状态

**检查方法**:
```bash
netstat -ano | findstr ":5000"
```

**如果未运行**:
- 运行: `快速启动后端.bat`
- 或手动运行: `cd src/Backend/UnifiedPlatform.WebApi && dotnet run`

---

## 🚀 快速访问步骤

### 步骤 1: 配置 Hosts 文件（如果未配置）

**Windows**:
1. 右键点击 `配置域名访问.bat`
2. 选择"以管理员身份运行"
3. 等待配置完成

**验证**:
```bash
ping www.a292428dsj.dpdns.org
```

---

### 步骤 2: 启动服务

**启动后端**:
```bash
快速启动后端.bat
```

**启动前端**:
```bash
启动HTTPS前端.bat
```

---

### 步骤 3: 访问网站

**打开浏览器访问**:
```
https://www.a292428dsj.dpdns.org:8443
```

**注意**:
- 浏览器可能显示证书警告（开发环境正常）
- 点击"高级" → "继续访问"即可

---

## 🔍 验证访问

### 1. 检查服务状态

```bash
# 检查后端
netstat -ano | findstr ":5000"

# 检查前端 HTTPS
netstat -ano | findstr ":8443"
```

### 2. 测试域名解析

```bash
ping www.a292428dsj.dpdns.org
# 应该返回 127.0.0.1
```

### 3. 测试 HTTPS 连接

在浏览器中访问:
- `https://www.a292428dsj.dpdns.org:8443`
- 应该能看到网站界面

### 4. 检查 API 连接

打开浏览器开发者工具（F12）:
- 查看 Network 标签
- API 请求应该返回 200 OK
- 不应该有 CORS 错误

---

## ⚠️ 常见问题

### 问题 1: 无法访问域名

**可能原因**:
- hosts 文件未配置
- DNS 解析失败

**解决方法**:
1. 运行 `配置域名访问.bat` (需要管理员权限)
2. 或手动编辑 hosts 文件

---

### 问题 2: 浏览器显示"无法访问此网站"

**可能原因**:
- 前端服务未启动
- 端口被占用
- 防火墙阻止

**解决方法**:
1. 检查前端服务是否运行: `netstat -ano | findstr ":8443"`
2. 如果未运行，启动服务: `启动HTTPS前端.bat`
3. 检查防火墙设置

---

### 问题 3: 证书警告

**这是正常的**（开发环境）:
- Vite 使用自签名证书
- 点击"高级" → "继续访问"即可

**生产环境**:
- 需要使用有效的 SSL 证书
- 可以通过 Let's Encrypt 或 Cloudflare 获取

---

### 问题 4: CORS 错误

**解决方法**:
1. 检查后端 CORS 配置
2. 确保包含 `https://www.a292428dsj.dpdns.org:8443`
3. 重启后端服务

---

## 📝 配置总结

### 当前配置

- ✅ **前端 HTTPS 端口**: 8443
- ✅ **后端 HTTP 端口**: 5000
- ✅ **域名**: www.a292428dsj.dpdns.org
- ✅ **协议**: HTTPS
- ✅ **CORS**: 已配置

### 访问地址

**主要访问地址**:
```
https://www.a292428dsj.dpdns.org:8443
```

**备用访问地址**:
```
https://localhost:8443
http://localhost:5173
```

---

## 🎯 使用标准端口 443（无端口号）

如果需要使用 `https://www.a292428dsj.dpdns.org/`（无端口号），需要：

1. **配置反向代理**（Nginx/IIS）
   - 反向代理监听 443 端口
   - 转发到 Vite 开发服务器（8443 端口）
   - 在反向代理层面处理 SSL 证书

2. **或使用生产环境部署**
   - 部署到 Cloudflare Pages
   - 使用 Cloudflare 的 SSL 证书
   - 自动处理 HTTPS

详细说明请查看: `HTTPS域名配置指南.md`

---

## ✅ 快速检查命令

```bash
# 检查 hosts 文件
ping www.a292428dsj.dpdns.org

# 检查服务状态
netstat -ano | findstr ":5000"
netstat -ano | findstr ":8443"

# 测试后端 API
curl http://localhost:5000/health

# 测试前端（需要浏览器）
# 访问: https://www.a292428dsj.dpdns.org:8443
```

---

## 📞 技术支持

如果遇到问题：
1. 检查服务是否正常运行
2. 检查 hosts 文件是否正确配置
3. 检查浏览器控制台是否有错误
4. 查看 Network 标签中的请求状态

